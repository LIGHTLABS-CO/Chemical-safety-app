<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chevron Base Environmental Monitor</title>
  <script defer>
    let refreshInterval;function fetchWeather(base) {
  clearInterval(refreshInterval); // Clear previous interval

  const coords = {
    baseA: { lat: 5.517, lon: 5.750 },
    baseB: { lat: 5.570, lon: 5.820 }
  };
  const { lat, lon } = coords[base];
  const apiKey = '7ce545e8426a719062d9f8a7795d1e56';
  const weatherURL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;
  const forecastURL = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

  async function update() {
    try {
      const weatherRes = await fetch(weatherURL);
      const forecastRes = await fetch(forecastURL);
      const weatherData = await weatherRes.json();
      const forecastData = await forecastRes.json();

      document.getElementById('base-name').textContent = base === 'baseA' ? 'Chevron Base A – Warri South' : 'Chevron Base B – Ekpan';
      document.getElementById('temp').textContent = `${weatherData.main.temp} °C`;
      document.getElementById('humidity').textContent = `${weatherData.main.humidity}%`;
      document.getElementById('wind').textContent = `${weatherData.wind.speed} km/h`;
      document.getElementById('condition').textContent = weatherData.weather[0].description;

      const forecastContainer = document.getElementById('forecast');
      forecastContainer.innerHTML = '';
      forecastData.list.slice(0, 6).forEach(item => {
        const el = document.createElement('div');
        el.className = 'bg-blue-100 rounded p-2 text-sm';
        el.innerHTML = `<strong>${item.dt_txt.slice(11, 16)}</strong>: ${item.weather[0].description}, ${item.main.temp}°C`;
        forecastContainer.appendChild(el);
      });
    } catch (error) {
      console.error('Error fetching data:', error);
    }
  }

  update();
  refreshInterval = setInterval(update, 1000); // Auto-refresh every second
}

  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-2xl mx-auto mt-10 p-6 bg-white shadow rounded">
    <h1 class="text-2xl font-bold mb-4">Chevron Base Environmental Monitor</h1>
    <div class="flex space-x-4 mb-6">
      <button onclick="fetchWeather('baseA')" class="px-4 py-2 bg-blue-500 text-white rounded">Monitor Base A – Warri South</button>
      <button onclick="fetchWeather('baseB')" class="px-4 py-2 bg-green-500 text-white rounded">Monitor Base B – Ekpan</button>
    </div>
    <div class="bg-gray-50 p-4 rounded shadow">
      <h2 id="base-name" class="text-xl font-semibold mb-2">No base selected</h2>
      <p><strong>Temperature:</strong> <span id="temp">--</span></p>
      <p><strong>Humidity:</strong> <span id="humidity">--</span></p>
      <p><strong>Wind Speed:</strong> <span id="wind">--</span></p>
      <p><strong>Condition:</strong> <span id="condition">--</span></p>
    </div>
    <div class="mt-6">
      <h3 class="text-lg font-bold mb-2">Forecast</h3>
      <div id="forecast" class="grid grid-cols-2 gap-2"></div>
    </div>
  </div>
</body>
</html>
